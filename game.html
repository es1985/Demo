<!doctype html>
<html id="inner-html" class="no-js" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pips demo</title>
  <link href='https://fonts.googleapis.com/css?family=Chewy' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/foundation.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <script src="js/vendor/modernizr.js"></script>
  <script src="js/vendor/ion.sound-2.1.3/ion.sound.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>

  <script src="js/miau.js"></script>
  <script src="js/game_manager.js"></script>
  <script src="js/social.js"></script>
  <script src="js/animation_manager.js"></script>

  <script src="https://www.gstatic.com/swiffy/v7.1/runtime.js"></script>

  <script type="text/javascript">
  document.domain="catpips.com";
  </script>

<!-- google analitycs-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59248958-1', 'auto');
  ga('send', 'pageview');

</script>

</head>
<body>    

  <script>

/*
JSON object to come out:
{"sender":TRUE, "text":FALSE, "emoticon":FALSE, "food_offered":FALSE, "food_accepted":FALSE, "action":FALSE, "score":FALSE, "level_up":FALSE}
*/
</script>

<div class="row full-height">


  <a id="clickable" href="#" onclick="game_manager.cat_clicked()" style='width: 100%;
  height: 44%;
  background: transparent;
  position: absolute;
  top: 200px;
  z-index: 6;'>
</a>


  <a id="while-scratch-clickable" href="#" style='width: 100%;
  height: 44%;
  background: transparent;
  position: absolute;
  top: 200px;
  z-index: 7;'>
</a>

<div id="scratch-image" style='display: none;'> 
  <a id="clickable-scratch" onclick="game_manager.scratch_image_clicked()"><img src="img/wall-scratch.png"></a>
</div>

<!-- onmousedown="javascript:game_manager.cat_click_down()" onmouseup="javascript:game_manager.cat_click_up()" --> 

<div id="cat_stage" class="swiffy_cat regular_placing" style="width:300px;height:300px;">
 

<!--
<div id="swiffycontainer3" class="swiffy_cat" style="width:300px;height:300px;">
-->
  <!-- onclick="javascript:play_anim_and_loop('eyes_twitch','cat_breathing',2000,'swiffycontainer')"-->
</div>
<div id="cat_hidden_stage" class="swiffy_cat" style="width:300px;height:300px;">
</div>

<div id="cat_hidden_stage2" class="swiffy_cat" style="width:300px;height:300px;">
</div>

<div id="fish_stage" style="width:300px;height:300px;">
</div>


<div id="" class="small-12 columns full-height">
  
<ul class="scores inline-list">
    <li><a id="back_to_mainscreen" class="back-to-games" href="index.html"><i class="fa fa-arrow-left"></i></a></li>
    <li>
      <a href="#" class="">
        <span class="top-left-points" data-dropdown="points-drop" aria-controls="points-drop" aria-expanded="false">
          <i class="fa fa-caret-down"></i>
          Points:<span id="score_number">00</span>
        </span>
      </a>
    </li>
    <li>
     <a href="#" id="levels" data-dropdown="levels-drop" aria-controls="levels-drop" aria-expanded="false">
        <span class="top-left-level">
          <i class="fa fa-caret-down"></i>
          Level:
          <span id="level">00</span>
        </span>
      </a>

    </li>
  </ul>

<!-- levels drop -->
  <div id="levels-drop" data-dropdown-content class="f-dropdown content" aria-hidden="true" tabindex="-1">
    <ul class="" style="list-style:none;margin:0px;">
    <li><p class="modal-header">Levels</p></li>
    <li class="achievement-thread">
      <ul class="next-achievements">
        <li class="clearfix">
          <span class="level-name left">1. Feeling comfi!</span>
          <span class="level-icon right"><img src="img/emoticons/pack-icon.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">2. Golden age!</span>
          <span class="level-icon right"><img src="img/gift-fish.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">3. Great Partners!</span>
          <span class="level-icon right"><img src="img/background-gift-modal.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">4. You Rock!</span>
          <span class="level-icon right"><img src="img/emoticons/pack-icon.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">5. Home Designers</span>
          <span class="level-icon right"><img src="img/background-gift-modal.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">6. You Rock!</span>
          <span class="level-icon right"><img src="img/emoticons/pack-icon.png">
        </li>
        <li class="clearfix">
          <span class="level-name left">7. Home Designers</span>
          <span class="level-icon right"><img src="img/background-gift-modal.png">
        </li>
      </ul>
    </li>
  </div>
  <!-- levels drop end -->


  <!-- achievements -->
 <div id="points-drop" data-dropdown-content class="f-dropdown content" aria-hidden="true" tabindex="-1">
    <ul class="" style="list-style:none;margin:0px;">
    <li><p class="modal-header">Achievements</p></li>
    <li class="achievement-thread">
      <ul id="achievement_list" class="next-achievements">
        
        <li id="food_once" class="clearfix">
          <span class="achievement-name">Eater</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/food01.png">
        </li>
          <li id="food_seven_times" class="clearfix">
          <span class="achievement-name">Big Eater</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/food-03.png">
        </li>

         <li id="slept_once" class="clearfix">
          <span class="achievement-name">Sleeper</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/sleep01.png">
        </li>
         <li id="scratched_once" class="clearfix">
          <span class="achievement-name">Scratcher</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/scratch01.png">
        </li>
          <li id="stopped_scratching_once" class="clearfix">
          <span class="achievement-name">Scratch Stopper</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/scratch-02.png">
        </li>
          <li id="revived_once" class="clearfix">
          <span class="achievement-name">Back To Life</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/food02.png">
        </li>
         <li id="food_when_really_hungry" class="clearfix">
          <span class="achievement-name">Savior</span>
          <span class="achievement-icon right not-achieved"><img src="img/achievements/food02.png">
        </li>

      </ul>
    </li>
  </div>

  <a href="#" class="health-icon" id="numero1"><img id="health-image" src="img/health-icon.png"></a>

  <ul class="cat-actions">
    <li class="cat-action cat-action-sleep"><button id="sleep_button" onclick="javascript:game_manager.sleep_clicked()"><i class="fa fa-moon-o"></i></button></li>
    <li class="cat-action cat-action-scratch" id="scratch_button" onclick="javascript:game_manager.scratch_clicked()"><button><i class="fa fa-paw"></i></button></li>
    <li id="food_bowl_button" class="cat-action cat-action-feedme"><a id="food_bowl_button" href="#" onclick="javascript:game_manager.food_bowl_button_clicked()"><img src="img/feedme.png"></a></li>
    
<!--
    <li id="human-tools" class="cat-action human-cog">
      <button onclick="javascript:game_manager.human_tools_clicked()"><i class="fa fa-cog"></i></button>
    </li>
-->
<li id="human-tools" class="cat-action human-cog">
      <button onclick="javascript:game_manager.human_tools_clicked()"><i class="fa fa-cog"></i></button>
    </li>

  </ul>
  
  <a class="food-bowl" onclick="javascript:game_manager.food_bowl_clicked()" href="#"><img id="food-bowl-img" src="img/foodbal-empty.png"></a>

<!--
  <button class="but human-feed">feed pips</button>
-->

      <!-- food modal -->
      <div id="foodModal" class="reveal-modal" data-reveal>
        <p class="lead"> <span class="food_sender_name"></span> <span id="text_with_food"></span></p>
        <p class="food-type-cat"><img id="offered_food_image" src=""></p>
        <div class="small-12 columns food-buttons-cat">
         

          <button onclick="javascript:food_clicked(0)" class="red-x small-6 columns"><i class="fa fa-times"></i></button>
          <button onclick="javascript:food_clicked(1)"class="green-y small-6 columns"><i class="fa fa-check"></i></button>
        
        </div>
        <!-- <a class="close-reveal-modal">&#215;</a> -->
      </div>
      <!-- food modal -->
      <!-- food modal approve-->
      <div id="foodModal-approve" class="reveal-modal clearfix" data-reveal style=" opacity: 1; visibility: visible; top: 0px;padding:0px;">
        <div class="left" id="foodModal-approve-img"><img id="approve-img" src=""></img></div>
        <div class="left" id="first-left">
          <span class="food_acceptor_name"></span> 
          <span id="food_acceptor_text"></span>
        </div>
        <div class="right"><span id="foodModal-approve-points"></span><span id="foodModal-approve-points-points">points</span></div>
        <a class="close-reveal-modal approval-close" id="">ok</a>
      </div>
      <!-- food modal approve-->
      <!-- landing modal -->
      <div id="landingModal" class="reveal-modal message-modal" data-reveal>
        <span class="landing-arrow-health"><img src="img/landind-modal-arrow.png"></span>
        <span class="landing-arrow-points"><img src="img/landind-modal-arrow.png"></span>
        <span class="landing-arrow-chat"><img src="img/landind-modal-arrow.png"></span>
        <p class="text-center"><img src="img/landing-modal-cat.png"></p>
        <p>You are Pips, a cat owned by Norman, a geeky computer engineer. In this demo you can and talk to Norman via emoticons and cat-chat. Take care to let Norman know when you are hungry and when to feed you!</p>
        <a class="close-reveal-modal landing-close" id="">&#215;</a>
      </div>
      <!-- landing modal -->

      <!-- Achivement Modal -->
      <div id="achive-modal" class="message-modal reveal-modal" data-reveal>
    <ul class="message-modal-header">
      <li>
        <p class="lead">Achievement! <span class="achievment-modal-details">sleep 1st time</span></p>
      </li>
    </ul>
    <p class="text-center achieve-modal-img"><img id="achieve_image" src="img/achievments/sleep01.png"></p>
    <a class="close-reveal-modal approval-close" id="achieve-ok">ok</a>
  </div>

      <!-- Achivement Modal -->

      <!-- level modal -->
      <div id="levelModal" class="message-modal level-modal reveal-modal" data-reveal>
        <ul class="inline-list message-modal-header">
          <li><i class="fa fa-trophy"></i></li>
          <li><p class="lead">New Level Reached!</p></li>
          <li><span class="level-modal-level">3</span></li>
        </ul>
        <p class="text-center level-modal-img"><img src="img/new-level.png"></p>
        <a class="close-reveal-modal approval-close" id="">ok</a>
      </div>

      <!-- level gift modal -->
      <div id="levelgiftModal" class="message-modal level-gift-modal reveal-modal" data-reveal data-options="close_on_background_click:false">
        <ul class="inline-list message-modal-header">
          <li><i class="fa fa-trophy"></i></li>
          <li><p class="lead">FREE EMOTICONS PACK!</p></li>
        </ul>
        <ul id="choose_new_emoticons_area" class="level-gift-icon-packs small-block-grid-3">
          <!--
          <li><img src="img/emoticons/emo-dayan.png"></li>
          <li><img src="img/emoticons/emo-dayan.png"></li>
          <li><img src="img/emoticons/emo-dayan.png"></li>
          <li><img src="img/emoticons/emo-dayan.png"></li>
          <li><img src="img/emoticons/emo-dayan.png"></li>
        -->
        </ul>
        <!--<a class="close-reveal-modal approval-close level-gift-close" id="">ok</a>-->
      </div>


      <!-- level gift fish modal -->
      <div id="fish-gift-modal" class="message-modal level-gift-modal level-gift-fish reveal-modal" data-reveal>
        <ul class="inline-list message-modal-header">
          <li><i class="fa fa-trophy"></i></li>
          <li><p class="lead">New Gift! Fish!</p></li>
        </ul>
        <p class="text-center level-modal-img"><img src="img/gift-fish.png"></p>
        <a class="close-reveal-modal approval-close level-gift-close" id="">ok</a>
      </div>
      <!-- level gist fish modal -->

  <!-- level gift fish modal -->
      <div id="background-gift-modal" class="message-modal level-gift-modal level-gift-fish reveal-modal" data-reveal>
        <ul class="inline-list message-modal-header">
          <li><i class="fa fa-trophy"></i></li>
          <li><p class="lead">New Gift! New Room Design!</p></li>
        </ul>
        <p class="text-center level-modal-img"><img src="img/background-gift-modal.png"></p>
        <a class="close-reveal-modal approval-close level-gift-close" id="">ok</a>
      </div>
      <!-- level gist fish modal -->




        <!-- Tools modal -->

        <!--
    <div id="tools-modal" class="reveal-modal" data-reveal>
    <ul class="example-orbit" data-orbit>
      <li id="house_background">
        <img src="img/backgrounds/background.png" alt="House" />
      </li>  
       <li id="seventies_background">
        <img src="img/backgrounds/70s.png" alt="Seventies" />
      </li>  
       <li id="seventies_background">
        <img src="img/backgrounds/concrete.png" alt="Concrete" />
      </li>  
       <li id="seventies_background">
        <img src="img/backgrounds/california.png" alt="California" />
      </li>      
    </ul>
      -->

    <div id="tools-modal" class="reveal-modal" data-reveal>
    <ul class="small-block-grid-2">
      <li id="house_li" onclick="javascript:game_manager.background_change_clicked('house')"><img src="img/backgrounds/background.png" alt="slide 1" /> </li>
      <li id="seventies_li" style="opacity:0.5;" ><img src="img/backgrounds/70s.png" alt="slide 1" /> </li>
      <li id="concrete_li" style="opacity:0.5;"><img src="img/backgrounds/concrete.png" alt="slide 1" /> </li>
      <li id="california_li" style="opacity:0.5;"><img src="img/backgrounds/california.png" alt="slide 1" /> </li>
    </ul>
    <a class="close-reveal-modal">&#215;</a>
  </div>



  <!-- <a class="close-reveal-modal">&#215;</a> -->
  </div>


      <!--<a href="#" class="the-cat"><img id="cat_avatar" src="img/cat.png"></a>-->


      <a href="#" onclick="javascript:game_manager.chat_clicked()" class="chat-trigger" data-dropdown="chat-drop" data-options="align: top" aria-controls="drop2" aria-expanded="false"><img src="img/chat-trigger-cat.png">
        <span id="numero2" class="chat-notifications"></span>
      </a>

      <div id="chat-drop" data-dropdown-content class="f-dropdown content" aria-hidden="true" tabindex="-1">


        <ul class="chat-thread">
        </ul>

        <form id="in-chat-input" onsubmit="text_submitted()" action="#"> 
          <div class="row">
            <div class="small-12 columns">
            
              <ul class="emoticons-slider" data-orbit>
                <!--
                <li class="three-emoticons">
                  <ul class="small-block-grid-3">
                    <li onclick="javascript:emoticon_clicked('emo-happy')" class="chat-cat-emoticon"><img src="img/emoticons/emo-happy.png" alt="slide 1" /></li>
                    <li onclick="emoticon_clicked('emo-love')" class="chat-cat-emoticon"><img src="img/emoticons/emo-love.png" alt="slide 1" /></li>
                    <li onclick="emoticon_clicked('emo-kania')" class="chat-cat-emoticon"><img src="img/emoticons/emo-kania.png" alt="slide 1" /></li>
                  </ul>
                </li>
           
                <li class="three-emoticons">
                  <ul class="small-block-grid-3">
                    <li onclick="javascript:emoticon_clicked('emo-hipster')" class="chat-cat-emoticon"><img src="img/emoticons/emo-hipster.png" alt="slide 1" /></li>
                    <li onclick="javascript:emoticon_clicked('emo-food')" class="chat-cat-emoticon"><img src="img/emoticons/emo-food.png" alt="slide 1" /></li>
                    <li onclick="javascript:emoticon_clicked('emo-pilot')" class="chat-cat-emoticon"><img src="img/emoticons/emo-pilot.png" alt="slide 1" /></li>
                  </ul>
                </li>

                <li class="three-emoticons">
                  <ul class="small-block-grid-3">
                    <li onclick="javascript:emoticon_clicked('emo-worried')" class="chat-cat-emoticon"><img src="img/emoticons/emo-worried.png" alt="slide 1" /></li>
                    <li onclick="javascript:emoticon_clicked('emo-mad')" class="chat-cat-emoticon"><img src="img/emoticons/emo-mad.png" alt="slide 1" /></li>
                    <li onclick="javascript:emoticon_clicked('emo-night')" class="chat-cat-emoticon"><img src="img/emoticons/emo-night.png" alt="slide 1" /></li>
                  </ul>
                </li>
              -->
              </ul>

            </div>
            <div class="large-12 columns">
              <div class="row collapse">
                <div class="small-12 columns">
                  <input type="text" id="chat_text" placeholder="">
                </div>
              </div>
            </div>
          </div>
        </form> 

      </div>

    </div>
  </div>

  <script src="js/vendor/jquery.js"></script>
  <script src="js/foundation/foundation.js"></script>
  <script src="js/foundation/foundation.dropdown.js"></script>
  <script src="js/foundation/foundation.orbit.js"></script>
  <script src="js/foundation/foundation.reveal.js"></script>
  <!-- <script src="js/vendor/jQuery.html5Loader.js"></script> -->


  <script>
  $(document).foundation('');
  </script>

  <script>

  var emoticons = '{"happy","sad","angry"}';

  $(document).ready(game_manager.onload_game());


   

     var txt = '{"sender":"BB Netanyahu","text":"ZOOOOOooooonk", "notification":"1","cat_sender":"0"}';
     //game_manager.read_j(txt);
     var txt2 = '{"sender":"Sarah Netanyahu","emoticon":"happy", "score":"2","cat_sender":"1"}';
     // game_manager.read_j(txt2);
     var txt3 = '{"sender":"BB Netanyahu","food_sent":"1", "cat_sender":"0"}';
     //game_manager.read_j(txt3);
     var txt4 = '{"sender":"BB Netanyahu","food_accepted":1,"cat_sender":"0"}';
     //game_manager.read_j(txt4);
     var txt5 = '{"sender":"BB Netanyahu","cat_sender":"0","general_animation_loop":"fish_regular","animation_stage":"fish_stage"}';
     //game_manager.read_j(txt5);
     var txt6 = '{"sender":"BB Netanyahu","score":"100"}';
     //game_manager.read_j(txt6);



     var init_json = {
      initialize:1,
    stats:{
        cat:sessionStorage.is_cat,
        score:1880,
        health:100,
        health_proxy:100,
        level:0,
        player:"Pips",
        other_player_name:"Norman",
        current_emoticons:[],
        possible_emoticon_list:[],
        notifications:0,
        dead:0,
        health_timer:{},
        modal_cue:[],
        message_number:0,
        emoticon_number:0,
        cat_sleep:0,
        food_bowl_opened:0,
        food_at_bowl:0,
        normal_mode:1,
        new_emoticon_pack:[],
        fish_there:0,
        scratching:0,
        displayed_cat_stage:"cat_stage",
        timeouts:{},
        game_id:game_manager.game_id,
        my_id:0,
        other_id:0,
        scratch_mark:0,
        last_timestamp:$.now(),
        last_health_timestamp:$.now(),
        animations:{"cat_stage":"cat_breathing","cat_hidden_stage":"wanting_caress","cat_hidden_stage2":"caressing_going_on"},
        },
        chat_history:[
        {},
        ],
    };
    var init_txt = JSON.stringify(init_json);
     //game_manager.read_j(init_txt);

     var init_json2={
initialize:1, 
game_id: "2475164534_238472356214",
game_state:{

  score:0,
  health:100,
  health_proxy:100,
  level:0,
  player:"Norman",
  other_player_name:"Norman",
  food_opened:0,
  current_emoticons:[],
  possible_emoticon_list:[],
  dead:0,
  health_timer:{},
  level_modal_open:0,
  message_number:0,
  emoticon_number:0,
  local:0,
  cat_sleep:0,
  head_clicked:0,
  belly_clicked:0,
  food_bowl_opened:0,
  food_at_bowl:0,
  normal_mode:1,
  new_emoticon_pack:[],
  fish_there:0,
  scratching:0,
  timeouts:{},
  game_id:0,
  scratch_mark:0,
  last_timestamp:0,
  last_health_timestamp:0,
  interval_for_scratching:7000,
  animations:{"cat_stage":"cat_breathing","cat_hidden_stage":"wanting_caress","cat_hidden_stage2":"caressing_going_on"},
  displayed_cat_stage:"cat_stage",
  },
chat_history:[],
};
  var init_txt2 = JSON.stringify(init_json2);
     //game_manager.read_j(init_txt2);

     </script>

   </body>
   </html>
